(window.webpackJsonpApp=window.webpackJsonpApp||[]).push([[40],{308:function(t,n,e){"use strict";e.r(n);var r=e(0),a=e.n(r),u=e(124),o=e.n(u),c=e(1),i=e(15),p=e.n(i);e(245),e(266);function d(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var e=[],r=!0,a=!1,u=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){a=!0,u=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw u}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.default=function(t){var n=t.province,e=d(Object(r.useState)([]),2),u=e[0],i=e[1],f="/api/overall?latest=0";n&&(f="/api/area?latest=0&province=".concat(n.provinceName));var s=function(t){var n=new Date(t),e=n.getMonth()+1,r=n.getDate();return"".concat(e,"/").concat(r)};Object(r.useEffect)((function(){Promise.resolve().then((function(){return fetch("https://lab.isaaclin.cn/nCoV"+f)})).catch((function(){return fetch("https://lab.ahusmart.com/nCoV"+f)})).then((function(t){return t.json()})).then((function(t){if(t.success)return t.results;throw new Error})).then((function(t){return t.map((function(t){return t.date=s(t.updateTime),t}))})).then((function(t){return t.filter((function(n,e){return e===t.findIndex((function(t){return t.date===n.date}))}))})).then((function(t){return t.sort((function(t,n){return t.updateTime-n.updateTime}))})).then((function(t){return t.map((function(n,e){var r=t[e-1];return n.suspectedIncr=r?n.suspectedCount-r.suspectedCount:0,n.confirmedIncr=r?n.confirmedCount-r.confirmedCount:0,n.curedIncr=r?n.curedCount-r.curedCount:0,n.deadIncr=r?n.deadCount-r.deadCount:0,n}))})).then(i)}),[n]);return a.a.createElement(c.a,{title:"疫情趋势"+(n?" - ".concat(n.provinceName):"")},a.a.createElement(o.a,{echarts:p.a,option:{tooltip:{trigger:"axis"},legend:{data:["疑似病例","确诊病例","治愈人数","死亡人数"]},grid:{left:"0%",right:"0%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:u.map((function(t){return s(t.updateTime)}))}],yAxis:[{type:"value"}],series:[{name:"疑似病例",type:"line",data:u.map((function(t){return t.suspectedCount}))},{name:"确诊病例",type:"line",data:u.map((function(t){return t.confirmedCount}))},{name:"治愈人数",type:"line",data:u.map((function(t){return t.curedCount}))},{name:"死亡人数",type:"line",data:u.map((function(t){return t.deadCount}))},{name:"新增疑似",type:"line",data:u.map((function(t){return t.suspectedIncr}))},{name:"新增确诊",type:"line",data:u.map((function(t){return t.confirmedIncr}))},{name:"新增治愈",type:"line",data:u.map((function(t){return t.curedIncr}))},{name:"新增死亡",type:"line",data:u.map((function(t){return t.deadIncr}))}]},lazyUpdate:!0,style:{height:"350px",width:"100%"}}))}}}]);